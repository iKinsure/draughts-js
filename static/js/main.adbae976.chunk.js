(this.webpackJsonpdraughts=this.webpackJsonpdraughts||[]).push([[0],[,,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},,function(t,e,r){"use strict";r.r(e);var n=r(1),i=r.n(n),a=r(8),c=r.n(a),u=(r(13),r(2)),s=r(3),o=r(6),f=r(5),h=(r(14),r(15),r(16),Object.freeze({EMPTY:0,BLACK:1,WHITE:2,BLACK_KING:3,WHITE_KING:4})),l=Object.freeze({EMPTY:0,ACTUAL:1,AVAILABLE:2,NECESSARY:3,KILLABLE:4}),v=[[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[2,0,2,0,2,0,2,0],[0,2,0,2,0,2,0,2],[2,0,2,0,2,0,2,0]],d=r(0),j=function(t){Object(o.a)(r,t);var e=Object(f.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return Object(d.jsx)("span",{className:"figure figure-"+Object.keys(h)[this.props.figure].toLowerCase()})}}]),r}(i.a.Component),b=function(t){Object(o.a)(r,t);var e=Object(f.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(s.a)(r,[{key:"renderFigure",value:function(t){if(t!==h.EMPTY)return Object(d.jsx)(j,{figure:t})}},{key:"renderItem",value:function(t,e,r){var n=this,i="board-item"+((r+e)%2===0?" board-item-white":" board-item-black")+" board-"+Object.keys(l)[this.props.view[e][r]].toLowerCase();return Object(d.jsx)("div",{className:i,onClick:function(){return n.props.onClick(e,r)},children:this.renderFigure(t)},r)}},{key:"renderRow",value:function(t,e){var r=this;return Object(d.jsx)("div",{className:"board-row",children:t.map((function(t,n){return r.renderItem(t,e,n)}))},e)}},{key:"render",value:function(){var t=this;return Object(d.jsx)("div",{className:"board "+this.props.classes,children:this.props.data.map((function(e,r){return t.renderRow(e,r)}))})}}]),r}(i.a.Component),E=r(4),A=[function(t,e){return[--t,--e]},function(t,e){return[--t,++e]},function(t,e){return[++t,--e]},function(t,e){return[++t,++e]}],L=function(t,e){return t>=0&&e>=0&&t<8&&e<8},O=function(t,e){return e?t===h.BLACK||t===h.BLACK_KING:t===h.WHITE||t===h.WHITE_KING},m=function(t,e){return e?t===h.WHITE||t===h.WHITE_KING:t===h.BLACK||t===h.BLACK_KING},p=function(t){return t===h.WHITE||t===h.BLACK},I=function(){return Array(8).fill(null).map((function(){return Array(8).fill(l.EMPTY)}))},w=function(){function t(e,r,n,i){Object(u.a)(this,t),this.i=e,this.j=r,this.requireKill=!1,this.matrix=this.createMatrix(e,r,n,i)}return Object(s.a)(t,[{key:"createMatrix",value:function(t,e,r,n){var i,a=I();if(m(r[t][e],n)){if(a[t][e]=l.ACTUAL,(i=r[t][e])===h.WHITE_KING||i===h.BLACK_KING?A.forEach((function(i){for(var c=i(t,e),u=Object(E.a)(c,2),s=u[0],o=u[1];L(s,o)&&!m(r[s][o],n);){if(O(r[s][o],n)){for(var f=i(s,o),v=Object(E.a)(f,2),d=v[0],j=v[1];L(d,j)&&r[d][j]===h.EMPTY;){a[s][o]=l.KILLABLE,a[d][j]=l.NECESSARY;var b=i(d,j),A=Object(E.a)(b,2);d=A[0],j=A[1]}break}a[s][o]=l.AVAILABLE;var p=i(s,o),I=Object(E.a)(p,2);s=I[0],o=I[1]}})):p(r[t][e])&&A.forEach((function(i){var c=i(t,e),u=Object(E.a)(c,2),s=u[0],o=u[1];if(L(s,o))if(m(r[s][o],n));else if(O(r[s][o],n)){var f=i(s,o),v=Object(E.a)(f,2),d=v[0],j=v[1];L(d,j)&&r[d][j]===h.EMPTY&&(a[s][o]=l.KILLABLE,a[d][j]=l.NECESSARY)}else a[s][o]=l.AVAILABLE})),a.some((function(t){return t.includes(l.NECESSARY)})))return this.requireKill=!0,a.map((function(t){return t.map((function(t){return t===l.AVAILABLE&&(t=l.EMPTY),t}))}));if(n&&p(r[t][e]))return a.map((function(e,r){return e.map((function(e){return t<r&&(e=l.EMPTY),e}))}));if(!n&&p(r[t][e]))return a.map((function(e,r){return e.map((function(e){return t>r&&(e=l.EMPTY),e}))}))}return a}}]),t}(),C=function(t){Object(o.a)(r,t);var e=Object(f.a)(r);function r(t){var n;return Object(u.a)(this,r),(n=e.call(this,t)).views=n.createViews(v,!0),n.state={data:v,isWhiteTurn:!0,rotated:!1,view:n.views[[0,0]]},n}return Object(s.a)(r,[{key:"createViews",value:function(t,e){var r=[];return t.forEach((function(n,i){return n.forEach((function(n,a){return r[[i,a]]=new w(i,a,t,e)}))})),r}},{key:"move",value:function(t,e,r,n,i){r[t][e]=i&&0===t?h.WHITE_KING:i||7!==t?r[n.i][n.j]:h.BLACK_KING,r[n.i][n.j]=h.EMPTY}},{key:"kill",value:function(t,e,r,n){for(var i=t>=n.i?1:-1,a=e>=n.j?1:-1,c=t,u=e;c!==n.i||u!==n.j;)if(c-=i,u-=a,n.matrix[c][u]===l.KILLABLE){r[c][u]=h.EMPTY;break}}},{key:"changePlayer",value:function(t,e){this.views=this.createViews(t,!e),this.setState({data:t,isWhiteTurn:!e,view:this.views[[0,0]]})}},{key:"handleClick",value:function(t,e){var r=this.state.view,n=this.state.data,i=this.state.isWhiteTurn;if(r.matrix[t][e]===l.AVAILABLE){var a=I(),c=!1;if(Object.entries(this.views).forEach((function(t){t[1].requireKill&&(c=!0,t[1].matrix.forEach((function(t,e){return t.forEach((function(t,r){t!==l.ACTUAL&&t!==l.KILLABLE||(a[e][r]=t)}))})))})),c){var u=r;return u.matrix=a,void this.setState({view:u})}this.move(t,e,n,r,i),this.changePlayer(n,i)}else r.matrix[t][e]===l.NECESSARY?(this.kill(t,e,n,r),this.move(t,e,n,r,i),this.views[[t,e]]=new w(t,e,n,i),this.views[[t,e]].requireKill?this.setState({data:n,view:this.views[[t,e]]}):this.changePlayer(n,i)):this.setState({view:this.views[[t,e]]})}},{key:"rotate",value:function(){this.setState({rotated:!this.state.rotated})}},{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)("header",{className:"app-header",children:Object(d.jsx)("h1",{children:"Draughts game!"})}),Object(d.jsxs)("main",{children:[Object(d.jsx)(b,{onClick:function(e,r){return t.handleClick(e,r)},data:this.state.data,view:this.state.view.matrix,classes:this.state.rotated?"board rotated":""}),Object(d.jsx)("p",{children:this.state.isWhiteTurn?"White round":"Black round"}),Object(d.jsx)("button",{onClick:function(){return t.rotate()},children:"Rotate board"})]})]})}}]),r}(i.a.Component),k=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,19)).then((function(e){var r=e.getCLS,n=e.getFID,i=e.getFCP,a=e.getLCP,c=e.getTTFB;r(t),n(t),i(t),a(t),c(t)}))};c.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root")),k()}],[[18,1,2]]]);
//# sourceMappingURL=main.adbae976.chunk.js.map