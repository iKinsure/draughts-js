(this.webpackJsonpdraughts=this.webpackJsonpdraughts||[]).push([[0],[,,,,,,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},,function(e,t,i){},function(e,t,i){"use strict";i.r(t);var n=i(1),r=i.n(n),a=i(8),s=i.n(a),c=(i(13),i(2)),o=i(3),u=i(5),h=i(4),f=(i(14),i(15),i(16),Object.freeze({EMPTY:0,BLACK:1,WHITE:2,BLACK_KING:3,WHITE_KING:4})),l=Object.freeze({EMPTY:0,ACTUAL:1,AVAILABLE:2,NECESSARY:3,KILLABLE:4}),v=Object.freeze({VS_PLAYER:0,VS_AI:1}),j=[[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[2,0,2,0,2,0,2,0],[0,2,0,2,0,2,0,2],[2,0,2,0,2,0,2,0]],d=i(0),w=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){return Object(d.jsx)("span",{className:"figure figure-"+Object.keys(f)[this.props.figure].toLowerCase()})}}]),i}(r.a.Component),E=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"renderFigure",value:function(e){if(e!==f.EMPTY)return Object(d.jsx)(w,{figure:e})}},{key:"renderItem",value:function(e,t,i){var n=this,r="board-item"+((i+t)%2===0?" board-item-white":" board-item-black")+" board-"+Object.keys(l)[this.props.view[t][i]].toLowerCase();return Object(d.jsx)("div",{className:r,onClick:function(){return n.props.onClick(t,i)},children:this.renderFigure(e)},i)}},{key:"renderRow",value:function(e,t){var i=this;return Object(d.jsx)("div",{className:"board-row",children:e.map((function(e,n){return i.renderItem(e,t,n)}))},t)}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{className:"board "+this.props.classes,children:this.props.data.map((function(t,i){return e.renderRow(t,i)}))})}}]),i}(r.a.Component),b=i(6),m=[function(e,t){return[--e,--t]},function(e,t){return[--e,++t]},function(e,t){return[++e,--t]},function(e,t){return[++e,++t]}],A=function(e,t){return e>=0&&t>=0&&e<8&&t<8},p=function(e,t){return t?e===f.BLACK||e===f.BLACK_KING:e===f.WHITE||e===f.WHITE_KING},O=function(e,t){return t?e===f.WHITE||e===f.WHITE_KING:e===f.BLACK||e===f.BLACK_KING},L=function(e){return e===f.WHITE||e===f.BLACK},k=function(){return Array(8).fill(null).map((function(){return Array(8).fill(l.EMPTY)}))},I=function(){function e(t,i,n,r){Object(c.a)(this,e),this.i=t,this.j=i,this.requireKill=!1,this.isBlocked=!1,this.matrix=this.createMatrix(t,i,n,r)}return Object(o.a)(e,[{key:"createMatrix",value:function(e,t,i,n){var r,a=0,s=k();return O(i[e][t],n)&&(s[e][t]=l.ACTUAL,(r=i[e][t])===f.WHITE_KING||r===f.BLACK_KING?m.forEach((function(r){for(var c=r(e,t),o=Object(b.a)(c,2),u=o[0],h=o[1];A(u,h)&&!O(i[u][h],n);){if(p(i[u][h],n)){for(var v=r(u,h),j=Object(b.a)(v,2),d=j[0],w=j[1];A(d,w)&&i[d][w]===f.EMPTY;){s[u][h]=l.KILLABLE,s[d][w]=l.NECESSARY;var E=r(d,w),m=Object(b.a)(E,2);d=m[0],w=m[1],a++}break}s[u][h]=l.AVAILABLE,a++;var L=r(u,h),k=Object(b.a)(L,2);u=k[0],h=k[1]}})):L(i[e][t])&&m.forEach((function(r){var c=r(e,t),o=Object(b.a)(c,2),u=o[0],h=o[1];if(A(u,h))if(O(i[u][h],n));else if(p(i[u][h],n)){var v=r(u,h),j=Object(b.a)(v,2),d=j[0],w=j[1];A(d,w)&&i[d][w]===f.EMPTY&&(s[u][h]=l.KILLABLE,s[d][w]=l.NECESSARY,a++)}else s[u][h]=l.AVAILABLE,a++})),s.some((function(e){return e.includes(l.NECESSARY)}))?(this.requireKill=!0,s=s.map((function(e){return e.map((function(e){return e===l.AVAILABLE&&(e=l.EMPTY,a--),e}))}))):n&&L(i[e][t])?s=s.map((function(t,i){return t.map((function(t){return e<i&&t!==l.EMPTY&&(t=l.EMPTY,a--),t}))})):!n&&L(i[e][t])&&(s=s.map((function(t,i){return t.map((function(t){return e>i&&t!==l.EMPTY&&(t=l.EMPTY,a--),t}))})))),0===a&&(this.isBlocked=!0),s}}]),e}(),y=(i(18),function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"menu",style:{display:this.props.isWinner?"block":"none"},children:[Object(d.jsx)("div",{className:"menu-message",children:this.props.msg}),Object(d.jsx)("div",{className:"menu-item",onClick:function(){return e.props.onClick.againstPlayer()},children:"Play against player"}),Object(d.jsx)("div",{className:"menu-item",onClick:function(){return e.props.onClick.againstAI()},children:"Play against AI"})]})}}]),i}(r.a.Component)),C=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},g=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e){var n;Object(c.a)(this,i),n=t.call(this,e);var r=JSON.parse(JSON.stringify(j));return n.views=n.createViews(r,!0),n.state={data:r,isWhiteTurn:!0,rotated:!1,view:n.views[0][0],isWinner:!0},n}return Object(o.a)(i,[{key:"isWinner",value:function(e,t,i){var n=0;e.forEach((function(e){return e.forEach((function(e){O(e,i)&&n++}))}));var r=!0;e:for(var a=0;a<8;a++)for(var s=0;s<8;s++)if(!t[a][s].isBlocked){r=!1;break e}return!(0!==n&&!r)&&(this.winner=i?"The winner is BLACK!":"The winner is WHITE!",!0)}},{key:"createViews",value:function(e,t){for(var i=[],n=0;n<8;n++){i.push([]);for(var r=0;r<8;r++)i[n][r]=new I(n,r,e,t)}return i}},{key:"move",value:function(e,t,i,n,r){i[e][t]=r&&0===e?f.WHITE_KING:r||7!==e?i[n.i][n.j]:f.BLACK_KING,i[n.i][n.j]=f.EMPTY}},{key:"kill",value:function(e,t,i,n){for(var r=e>=n.i?1:-1,a=t>=n.j?1:-1,s=e,c=t;s!==n.i||c!==n.j;)if(s-=r,c-=a,n.matrix[s][c]===l.KILLABLE){i[s][c]=f.EMPTY;break}}},{key:"changePlayer",value:function(e,t){var i=this;t=!t;var n=this.createViews(e,t);if(this.isWinner(e,n,t))this.setState({isWinner:!0});else if(this.state.mode===v.VS_PLAYER)this.views=n,this.setState({data:e,isWhiteTurn:t,view:this.views[0][0]});else if(this.state.mode===v.VS_AI){var r=[],a=[],s=!1;if(n.forEach((function(e){e.forEach((function(e){e.matrix.forEach((function(t,i){t.forEach((function(t,n){t===l.NECESSARY?(s=!0,r.push({view:e,i:i,j:n})):t===l.AVAILABLE&&a.push({view:e,i:i,j:n})}))}))}))})),s)!function(){var a=r[C(0,r.length-1)];for(i.kill(a.i,a.j,e,a.view),i.move(a.i,a.j,e,a.view,t),n[a.i][a.j]=new I(a.i,a.j,e,t),a.view=n[a.i][a.j],n[a.view.i][a.view.j]=new I(a.view.i,a.view.j,e,t);n[a.i][a.j].requireKill;)n[a.i][a.j].matrix.forEach((function(e,t){e.forEach((function(e,i){e===l.NECESSARY&&(a.i=t,a.j=i)}))})),i.kill(a.i,a.j,e,a.view),i.move(a.i,a.j,e,a.view,t),n[a.i][a.j]=new I(a.i,a.j,e,t),a.view=n[a.i][a.j],n[a.view.i][a.view.j]=new I(a.view.i,a.view.j,e,t)}();else{var c=a[C(0,a.length-1)];this.move(c.i,c.j,e,c.view,t)}this.views=this.createViews(e,!t),this.setState({data:e,isWhiteTurn:!t,view:this.views[0][0]})}}},{key:"handleClick",value:function(e,t){var i=this.state.view,n=this.state.data,r=this.state.isWhiteTurn;if(i.matrix[e][t]===l.AVAILABLE){var a=k(),s=!1;if(this.views.forEach((function(e){e.forEach((function(e){e.requireKill&&(s=!0,e.matrix.forEach((function(e,t){e.forEach((function(e,i){e!==l.ACTUAL&&e!==l.KILLABLE||(a[t][i]=e)}))})))}))})),s){var c=i;return c.matrix=a,void this.setState({view:c})}this.move(e,t,n,i,r),this.changePlayer(n,r)}else i.matrix[e][t]===l.NECESSARY?(this.kill(e,t,n,i),this.move(e,t,n,i,r),this.views[e][t]=new I(e,t,n,r),this.views[i.i][i.j]=new I(i.i,i.j,n,r),this.views[e][t].requireKill?this.setState({data:n,view:this.views[e][t]}):this.changePlayer(n,r)):this.setState({view:this.views[e][t]})}},{key:"rotate",value:function(){this.setState({rotated:!this.state.rotated})}},{key:"againstPlayer",value:function(){var e=JSON.parse(JSON.stringify(j));this.views=this.createViews(e,!0),this.setState({data:e,isWhiteTurn:!0,rotated:!1,view:this.views[0][0],isWinner:!1,mode:v.VS_PLAYER})}},{key:"againstAI",value:function(){var e=JSON.parse(JSON.stringify(j));this.views=this.createViews(e,!0),this.setState({data:e,isWhiteTurn:!0,rotated:!1,view:this.views[0][0],isWinner:!1,mode:v.VS_AI})}},{key:"render",value:function(){var e=this,t=this.state.isWinner;return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)("header",{className:"app-header",children:Object(d.jsx)("h1",{children:"Draughts game!"})}),Object(d.jsxs)("main",{children:[Object(d.jsx)(E,{onClick:t?function(){}:function(t,i){return e.handleClick(t,i)},data:this.state.data,view:this.state.view.matrix,classes:this.state.rotated?"board rotated":""}),Object(d.jsx)("p",{children:this.state.isWhiteTurn?"White round":"Black round"}),Object(d.jsx)(y,{isWinner:t,msg:this.winner,onClick:{againstPlayer:function(){return e.againstPlayer()},againstAI:function(){return e.againstAI()}}}),Object(d.jsx)("button",{onClick:function(){return e.rotate()},children:"Rotate board"})]})]})}}]),i}(r.a.Component),S=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,20)).then((function(t){var i=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;i(e),n(e),r(e),a(e),s(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root")),S()}],[[19,1,2]]]);
//# sourceMappingURL=main.5bac68a8.chunk.js.map